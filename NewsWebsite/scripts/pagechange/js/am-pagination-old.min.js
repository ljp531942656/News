!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):t.amPagination=e(t.jQuery)}(this,function(t){var e=function(e,a){var i=t.extend({},t.fn.pager.default,a);this.ele=e,this.container=function(e){if(e.checkTag(e.ele,"UL"))return e.ele;var a=e.ele.find("ul");a.length>0&&a.remove();var i=t("<ul  />");return e.ele.append(i),i}(this),this.onChangePage=function(t){return t&&"function"==typeof t&&this.ele.on("am.pager.change",t),this},this.maxSize=i.maxSize||this.ele.data("maxSize"),this._page=-1,this.totals=i.totals,this.currPage=function(){return this._page+1},i.page&&i.page>0?this._page=i.page-1:this.ele.data("page")&&(this._page=parseInt(this.ele.data("page"))),this.container.addClass(i.className),this.pageSize=i.pageSize,this.selectPage=function(t){i.page=t,this.ele.trigger({type:"am.pager.change",page:t,pageSize:this.pageSize,totals:this.totals}),this._page=t-1,this.fill(),this.ele.trigger("am.context.change")},this.context=function(){return i},this.render=function(t){if(t.hasOwnProperty("totals")&&(this.totals=i.totals=t.totals,0===this.totals&&(this.totals=i.totals=1)),t.hasOwnProperty("pageSize")&&(this.pageSize=i.pageSize=t.pageSize),t.hasOwnProperty("page")){i.page=t.page;this._page=i.page-1}this.selectPage(this.currPage())},this.changeContext=function(){this.ele.attr("data-pagination",JSON.stringify(this.context()))},this.ele.on("am.context.change",t.proxy(this.changeContext,this)),this.click=function(e){e.preventDefault();var a="",i=t(e.target),s=i.parent("li");if(s.hasClass("pager-first"))this.selectPage(1);else if(s.hasClass("pager-prev"))a=this.currPage()-1,this.selectPage(a);else if(s.hasClass("pager-next"))a=this.currPage()+1,this.selectPage(a);else if(s.hasClass("pager-last")){var n=Math.ceil(this.totals/this.pageSize);this.selectPage(n)}else{if(s.hasClass("am-active"))return;this.selectPage(parseInt(i.text()))}},this.fill=function(){if(this.pageSize<=0)throw Error("pageSize invalid!");this.totals<=0&&console.warn("totals :"+this.totals);var t=Math.ceil(this.totals/this.pageSize);this._page<0&&(this._page=0),this._page>t-1&&(this._page=t-1);var e=-1,a=-1;if(!0===i.rotate){if(this.maxSize%2!=0){var s=Math.floor(this.maxSize/2);this._page-s>=0?(e=this._page-s,a=this._page+s>t-1?t-1:this._page+s):(e=0,a=this.maxSize-1)}else{var n=this.maxSize/2;this._page-n>=0?(e=this._page-n,a=this._page+(n-1)<t?this._page+(n-1):t-1):(a=this.maxSize-1,e=0)}a+=1}else e=this._page-this._page%this.maxSize,a=e+this.maxSize;a=a>t?t:a;var r=[];!0===i.boundaryLinks&&r.push('<li  class=" pager-first '+(0===this._page||this.totals<=0?"am-disabled":"")+'" ><a href="#">'+i.firstText+"</a></li>"),!0===i.directionLinks&&r.push('<li  class=" pager-prev   '+(0===this._page||this.totals<=0?"am-disabled":"")+'  "><a href="#">'+i.prevText+"</a></li>"),0!==e&&r.push("<li><span>...</span></li>");for(var h=e;h<a;h++)r.push("<li "+(this._page===h?'class="am-active"':"")+'><a href="#">'+(h+1)+"</a></li>");a!==t&&r.push("<li><span>...</span></li>"),!0===i.directionLinks&&r.push(' <li class="pager-next '+(this._page===t-1||this.totals<=0?"am-disabled ":"")+'"><a href="#">'+i.nextText+"</a></li>"),!0===i.boundaryLinks&&r.push(' <li class=" pager-last '+(this._page===t-1||this.totals<=0?"am-disabled":"")+'"><a href="#">'+i.lastText+"</a></li>"),this.container.html(r.join(""))},this.container.on("click","li>a",t.proxy(this.click,this)),this.selectPage(i.page)};return e.Global={checkDom:function(t){return"object"==typeof HTMLElement?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName}},check$:function(e){return!!e&&e instanceof t}},e.prototype={constructor:e,checkTag:function(a,i){return a instanceof t?a.get(0).tagName===i:e.Global.checkDom(a)?a.tagName===i:"string"==typeof a&&t(a).get(0).tagName===i}},t.fn.pager=function(a){var i={};if(args=arguments,this.attr("data-pagination")){var s=this.attr("data-pagination"),n=JSON.parse(s),r=function(){return 0!==args.length}()&&t.extend({},n,a);i=new e(this,!1===r?n:r)}else{i=new e(this,a);var h=JSON.stringify(i.context());this.attr("data-pagination",h)}return i},t.fn.pager.default={maxSize:7,totals:100,page:1,pageSize:10,lastText:"&raquo;&raquo;",firstText:"&laquo;&laquo;",prevText:"&laquo;",nextText:"&raquo;",rotate:!0,directionLinks:!0,boundaryLinks:!0,className:"am-pagination"},function(a,i){var s={};return a instanceof t?s=a:e.Global.checkDom(a)?s=t(a):"string"==typeof a&&(s=t(a)),t.fn.pager.call(s,i)}});